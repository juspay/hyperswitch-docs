<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1540.6883724442564" height="1464.8656386979992"><desc>sequenceDiagram%0A%0A%20rect%20rgb(245%2C%20245%2C%20245)%0Aparticipant%20User%0Aparticipant%20Merchant%20BE%0Aparticipant%20HS%20BE%0Aparticipant%20HS%20SDK%0Aparticipant%20External%20Vault%0Aparticipant%20Connector%0A%0A%20%20%20%20note%20right%20of%20User%3A%20Phase%200%3A%20Setup%0A%20%20%20%20Merchant%20BE-%3E%3EHS%20BE%3A%20POST%20%2Fpayments%20(Create%20Intent)%0A%20%20%20%20HS%20BE--%3E%3EMerchant%20BE%3A%20Return%20client_secret%0A%20%20%20%20Merchant%20BE--%3E%3EHS%20SDK%3A%20Initialize%20HS%20SDK%20with%20client_secret%0A%20%20%20%20end%0A%0A%20%20%20%20rect%20rgb(240%2C%20248%2C%20255)%0A%20%20%20%20note%20right%20of%20User%3A%20Phase%201%3A%20Capture%20%26%20Tokenization%0A%20%20%20%20User-%3E%3EHS%20SDK%3A%20Enters%20Card%20Details%0A%20%20%20%20note%20over%20HS%20SDK%3A%20HS%20SDK%20Encrypts%20Data%0A%20%20%20%20HS%20SDK-%3E%3EHS%20BE%3A%20POST%20%2Fpayments%2Fconfirm%5Cn(Contains%20Raw%20Card%20Data)%0A%20%20%20%20%0A%20%20%20%20activate%20HS%20BE%0A%0A%20%20%20%20%0A%20%20%20%20HS%20BE-%3E%3EExternal%20Vault%3A%20Request%20to%20tokenize%20the%20Card%0A%20%20%20%20activate%20External%20Vault%0A%20%20%20%20note%20over%20External%20Vault%3A%20Vault%20stores%20PAN%2C%5Cngenerates%20alias%0A%20%20%20%20External%20Vault--%3E%3EHS%20BE%3A%20Return%20External%20Token%20(e.g.%2C%20tok_ext_123)%0A%20%20%20%20deactivate%20External%20Vault%0A%20%20%20%20%0A%20%20%20%20HS%20BE-%3E%3EHS%20BE%3A%20Map%20tok_ext_123%20to%20HS%20payment_method_id%0A%20%20%20%20end%0A%0A%20%20%20%20rect%20rgb(255%2C%20245%2C%20238)%0A%20%20%20%20note%20right%20of%20User%3A%20Phase%202%3A%20Payment%20Using%20Tokenized%20Card%0AMerchant%20BE-%3EHS%20BE%3A%2Fpayments%5Cn(Customer%20ID)%0A%20%20%20%20note%20right%20of%20HS%20BE%3A%20Orchestration%3A%20Select%20Connector%20(e.g.%20Stripe)%0A%20%20%20%20%0A%20%20%20%20HS%20BE-%3E%3EExternal%20Vault%3A%20Forward%20Proxy%20Request%5Cn%22Send%20payload%20for%20tok_ext_123%20to%20Connector%22%0A%20%20%20%20activate%20External%20Vault%0A%20%20%20%20%0A%20%20%20%20note%20over%20External%20Vault%3A%201.%20Retrieve%20Card%20Data%20using%20tok_ext_123%5Cn2.%20Construct%20Connector%20API%20Request%5Cn3.%20Inject%20Real%20Card%20Data%0A%20%20%20%20%0A%20%20%20%20External%20Vault-%3E%3EConnector%3A%20Process%20Payment%20Using%20Card%20Data%0A%20%20%20%20activate%20Connector%0A%20%20%20%20Connector--%3E%3EExternal%20Vault%3A%20Payment%20Success%0A%20%20%20%20deactivate%20Connector%0A%20%20%20%20%0A%20%20%20%20External%20Vault--%3E%3EHS%20BE%3A%20Forward%20Connector%20Response%0A%20%20%20%20deactivate%20External%20Vault%0A%20%20%20%20%0A%20%20%20%20HS%20BE--%3E%3EHS%20SDK%3A%20Payment%20Success%0A%20%20%20%20deactivate%20HS%20BE%0A%20%20%20%20HS%20SDK--%3E%3EUser%3A%20Show%20%22Paid%22%20UI%0A%20%20%20%20end%0A%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1540" height="1464"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 43.35894866259375 59.284222437999986 L 43.35894866259375 1464.8656386979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 377.48742719763277 59.284222437999986 L 377.48742719763277 1464.8656386979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 643.4021937543384 59.284222437999986 L 643.4021937543384 1464.8656386979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1008.3021674444556 59.284222437999986 L 1008.3021674444556 1464.8656386979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1187.160686789117 59.284222437999986 L 1187.160686789117 1464.8656386979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1478.9865511620337 59.284222437999986 L 1478.9865511620337 1464.8656386979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 11.786477457999997 L 77.92201862518749 11.786477457999997 L 77.92201862518749 59.284222437999986 L 8.795878699999996 59.284222437999986 L 8.795878699999996 11.786477457999997 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="41.692465037999995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 316.0310237999804 11.786477457999997 L 438.9438305952851 11.786477457999997 L 438.9438305952851 59.284222437999986 L 316.0310237999804 59.284222437999986 L 316.0310237999804 11.786477457999997 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="335.1180805789804" y="41.692465037999995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Merchant BE</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 602.3180056276822 11.786477457999997 L 684.4863818809947 11.786477457999997 L 684.4863818809947 59.284222437999986 L 602.3180056276822 59.284222437999986 L 602.3180056276822 11.786477457999997 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="621.4050624066822" y="41.692465037999995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">HS BE</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 961.9244917689712 11.786477457999997 L 1054.67984311994 11.786477457999997 L 1054.67984311994 59.284222437999986 L 961.9244917689712 59.284222437999986 L 961.9244917689712 11.786477457999997 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="981.0115485479712" y="41.692465037999995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">HS SDK</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1122.980597173203 11.786477457999997 L 1251.3407764050312 11.786477457999997 L 1251.3407764050312 59.284222437999986 L 1122.980597173203 59.284222437999986 L 1122.980597173203 11.786477457999997 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1142.067653952203" y="41.692465037999995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">External Vault</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1426.080608579811 11.786477457999997 L 1531.8924937442564 11.786477457999997 L 1531.8924937442564 59.284222437999986 L 1426.080608579811 59.284222437999986 L 1426.080608579811 11.786477457999997 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1445.167665358811" y="41.692465037999995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Connector</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 634.6063150543384 532.5024964979998 L 652.1980724543384 532.5024964979998 L 652.1980724543384 1354.0375670779993 L 634.6063150543384 1354.0375670779993 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1178.364808089117 581.7594172179998 L 1195.956565489117 581.7594172179998 L 1195.956565489117 715.4567734579999 L 1178.364808089117 715.4567734579999 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1178.364808089117 1054.9776912779996 L 1195.956565489117 1054.9776912779996 L 1195.956565489117 1304.7806463579993 L 1178.364808089117 1304.7806463579993 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1470.1906724620337 1206.2668049179995 L 1487.7824298620337 1206.2668049179995 L 1487.7824298620337 1255.5237256379994 L 1470.1906724620337 1255.5237256379994 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 43.35894866259375 114.69825824799997 L 52.15482736259375 114.69825824799997" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.15482736259375 94.46773723799997 L 185.82966996263283 94.46773723799997 L 201.66225162263282 110.30031889799997 L 201.66225162263282 134.92877925799996 L 52.15482736259375 134.92877925799996 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 185.82966996263283 94.46773723799997 L 185.82966996263283 110.30031889799997 L 201.66225162263282 110.30031889799997" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="76.78328772259376" y="119.09619759799997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Phase 0: Setup</text></g><g><rect fill="white" stroke="none" x="402.70227947096606" y="161.31641535799994" width="215.48506201003906" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="405.3410430809661" y="177.14899701799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">POST /payments (Create Intent)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 377.48742719763277 184.18569997799995 L 641.2032240793385 184.18569997799995" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(643.4021937543384,184.18569997799995) translate(-643.4021937543384,-184.18569997799995)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 628.3303921110495 177.46204114732853 L 641.754178514516 184.18569997799995 L 628.3303921110495 190.90935880867136" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="442.6199659333684" y="210.57333607799993" width="135.64968908523437" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="445.2587295433684" y="226.40591773799994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return client_secret</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 643.4021937543384 233.44262069799993 L 379.68639687263277 233.44262069799993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(377.48742719763277,233.44262069799993) translate(-377.48742719763277,-233.44262069799993)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 392.5592288409218 226.71896186732852 L 379.1354424374553 233.44262069799993 L 392.5592288409218 240.16627952867134" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="576.1902301832122" y="259.83025679799994" width="233.40913427566406" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="578.8289937932121" y="275.66283845799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Initialize HS SDK with client_secret</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 377.48742719763277 282.6995414179999 L 1006.1031977694556 282.6995414179999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(1008.3021674444556,282.6995414179999) translate(-1008.3021674444556,-282.6995414179999)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 993.2303658011666 275.97588258732856 L 1006.6541522046331 282.6995414179999 L 993.2303658011666 289.42320024867126" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 43.35894866259375 329.3176985279999 L 52.15482736259375 329.3176985279999" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.15482736259375 309.0871775179999 L 299.0937690837265 309.0871775179999 L 314.9263507437265 324.91975917799994 L 314.9263507437265 349.5482195379999 L 52.15482736259375 349.5482195379999 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 299.0937690837265 309.0871775179999 L 299.0937690837265 324.91975917799994 L 314.9263507437265 324.91975917799994" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="76.78328772259374" y="333.7156378779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Phase 1: Capture &amp; Tokenization</text></g><g><rect fill="white" stroke="none" x="459.64135651627856" y="375.9358556379999" width="132.37840307449218" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.2801201262786" y="391.7684372979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Enters Card Details</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 43.35894866259375 398.8051402579999 L 1006.1031977694556 398.8051402579999" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(1008.3021674444556,398.8051402579999) translate(-1008.3021674444556,-398.8051402579999)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 993.2303658011666 392.0814814273285 L 1006.6541522046331 398.8051402579999 L 993.2303658011666 405.52879908867124" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 908.312241630354 425.1927763579999 L 1092.4595115985571 425.1927763579999 L 1108.292093258557 441.0253580179999 L 1108.292093258557 465.65381837799987 L 908.312241630354 465.65381837799987 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1092.4595115985571 425.1927763579999 L 1092.4595115985571 441.0253580179999 L 1108.292093258557 441.0253580179999" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="932.940701990354" y="449.82123671799985" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">HS SDK Encrypts Data</text></g><g><rect fill="white" stroke="none" x="741.6557594155689" y="492.0414544779998" width="169.0283817121875" height="22.86928462"/><rect fill="white" stroke="none" x="741.6557594155689" y="509.6332118779998" width="177.18872106765625" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="744.2945230255689" y="507.87403613799984" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">POST /payments/confirm</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="744.2945230255689" y="525.4657935379998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Contains Raw Card Data)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1008.3021674444556 532.5024964979998 L 654.3970421293384 532.5024964979998" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(652.1980724543384,532.5024964979998) translate(-652.1980724543384,-532.5024964979998)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 667.2698740976274 525.7788376673284 L 653.8460876941609 532.5024964979998 L 667.2698740976274 539.2261553286712" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="817.7035516006927" y="558.8901325979998" width="195.1557773420703" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="820.3423152106926" y="574.7227142579998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Request to tokenize the Card</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 652.1980724543384 581.7594172179998 L 1176.1658384141172 581.7594172179998" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(1178.364808089117,581.7594172179998) translate(-1178.364808089117,-581.7594172179998)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1163.293006445828 575.0357583873284 L 1176.7167928492945 581.7594172179998 L 1163.293006445828 588.4830760486713" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1105.7641752816562 608.1470533179998 L 1252.724616636578 608.1470533179998 L 1268.557198296578 623.9796349779998 L 1268.557198296578 666.1998527379999 L 1105.7641752816562 666.1998527379999 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1252.724616636578 608.1470533179998 L 1252.724616636578 623.9796349779998 L 1268.557198296578 623.9796349779998" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1130.3926356416562" y="632.7755136779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Vault stores PAN,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1130.3926356416562" y="650.3672710779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">generates alias</text></g><g><rect fill="white" stroke="none" x="776.9626992447356" y="692.5874888379999" width="276.6374820539844" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="779.6014628547356" y="708.4200704979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return External Token (e.g., tok_ext_123)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1178.364808089117 715.4567734579999 L 654.3970421293384 715.4567734579999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(652.1980724543384,715.4567734579999) translate(-652.1980724543384,-715.4567734579999)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 667.2698740976274 708.7331146273285 L 653.8460876941609 715.4567734579999 L 667.2698740976274 722.1804322886713" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="673.0149853776718" y="741.8444095579999" width="295.39913976882815" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="675.6537489876717" y="757.6769912179999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Map tok_ext_123 to HS payment_method_id</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 652.1980724543384 764.7136941779999 L 722.5651020543385 764.7136941779999 L 722.5651020543385 787.5829787979999 L 654.3970421293384 787.5829787979999" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(652.1980724543384,787.5829787979999) translate(-652.1980724543384,-787.5829787979999)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 667.2698740976274 780.8593199673285 L 653.8460876941609 787.5829787979999 L 667.2698740976274 794.3066376286713" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 43.35894866259375 834.2011359079999 L 52.15482736259375 834.2011359079999" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.15482736259375 813.9706148979998 L 352.85896683763275 813.9706148979998 L 368.69154849763277 829.8031965579997 L 368.69154849763277 854.4316569179998 L 52.15482736259375 854.4316569179998 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 352.85896683763275 813.9706148979998 L 352.85896683763275 829.8031965579997 L 368.69154849763277 829.8031965579997" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="76.78328772259374" y="838.5990752579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Phase 2: Payment Using Tokenized Card</text></g><g><rect fill="white" stroke="none" x="457.38808035534106" y="880.8192930179997" width="72.908142454375" height="22.86928462"/><rect fill="white" stroke="none" x="457.38808035534106" y="898.4110504179997" width="97.31758154128906" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.0268439653411" y="896.6518746779997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">/payments</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.0268439653411" y="914.2436320779997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Customer ID)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 377.48742719763277 921.2803350379997 L 620.1224347950051 921.2803350379997" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(634.6063150543384,921.2803350379997) translate(-634.6063150543384,-921.2803350379997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 619.9465172210051 913.950436121333 L 634.6063150543384 921.2803350379997 L 619.9465172210051 928.6102339546665 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 652.1980724543384 967.8984921479997 L 660.9939511543384 967.8984921479997" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 660.9939511543384 947.6679711379996 L 983.6737070844556 947.6679711379996 L 999.5062887444556 963.5005527979996 L 999.5062887444556 988.1290131579997 L 660.9939511543384 988.1290131579997 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 983.6737070844556 947.6679711379996 L 983.6737070844556 963.5005527979996 L 999.5062887444556 963.5005527979996" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="685.6224115143384" y="972.2964314979997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Orchestration: Select Connector (e.g. Stripe)</text></g><g><rect fill="white" stroke="none" x="766.0357125503997" y="1014.5166492579995" width="159.264587766875" height="22.86928462"/><rect fill="white" stroke="none" x="766.0357125503997" y="1032.1084066579995" width="298.4914554426563" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="768.6744761603996" y="1030.3492309179994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Forward Proxy Request</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="768.6744761603996" y="1047.9409883179994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"Send payload for tok_ext_123 to Connector"</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 652.1980724543384 1054.9776912779996 L 1176.1658384141172 1054.9776912779996" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(1178.364808089117,1054.9776912779996) translate(-1178.364808089117,-1054.9776912779996)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1163.293006445828 1048.2540324473282 L 1176.7167928492945 1054.9776912779996 L 1163.293006445828 1061.701350108671" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1030.1092222787265 1081.3653273779996 L 1328.3795696395077 1081.3653273779996 L 1344.2121512995077 1097.1979090379996 L 1344.2121512995077 1157.0098841979996 L 1030.1092222787265 1157.0098841979996 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1328.3795696395077 1081.3653273779996 L 1328.3795696395077 1097.1979090379996 L 1344.2121512995077 1097.1979090379996" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1054.7376826387265" y="1105.9937877379994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Retrieve Card Data using tok_ext_123</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1054.7376826387265" y="1123.5855451379994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. Construct Connector API Request</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1054.7376826387265" y="1141.1773025379994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. Inject Real Card Data</text></g><g><rect fill="white" stroke="none" x="1216.7734784124502" y="1183.3975202979996" width="232.60028112625" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1219.4122420224503" y="1199.2301019579995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Process Payment Using Card Data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1195.956565489117 1206.2668049179995 L 1467.9917027870338 1206.2668049179995" stroke-miterlimit="10" stroke-width="1.4659797833333332"/><g transform="translate(1470.1906724620337,1206.2668049179995) translate(-1470.1906724620337,-1206.2668049179995)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1455.1188708187447 1199.543146087328 L 1468.5426572222111 1206.2668049179995 L 1455.1188708187447 1212.990463748671" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="1271.769884967626" y="1232.6544410179995" width="122.60746801589843" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1274.408648577626" y="1248.4870226779994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Payment Success</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1470.1906724620337 1255.5237256379994 L 1198.155535164117 1255.5237256379994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(1195.956565489117,1255.5237256379994) translate(-1195.956565489117,-1255.5237256379994)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1211.0283671324062 1248.800066807328 L 1197.6045807289397 1255.5237256379994 L 1211.0283671324062 1262.2473844686708" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="814.8617470962981" y="1281.9113617379994" width="200.83938635085937" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="817.5005107062981" y="1297.7439433979994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Forward Connector Response</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1178.364808089117 1304.7806463579993 L 654.3970421293384 1304.7806463579993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(652.1980724543384,1304.7806463579993) translate(-652.1980724543384,-1304.7806463579993)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 667.2698740976274 1298.056987527328 L 653.8460876941609 1304.7806463579993 L 667.2698740976274 1311.5043051886707" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="768.9463859414478" y="1331.1682824579993" width="122.60746801589843" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="771.5851495514478" y="1347.0008641179993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Payment Success</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 652.1980724543384 1354.0375670779993 L 1006.1031977694556 1354.0375670779993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(1008.3021674444556,1354.0375670779993) translate(-1008.3021674444556,-1354.0375670779993)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 993.2303658011666 1347.3139082473278 L 1006.6541522046331 1354.0375670779993 L 993.2303658011666 1360.7612259086707" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><rect fill="white" stroke="none" x="473.57834534684497" y="1380.4252031779993" width="104.50442541335937" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="476.217108956845" y="1396.2577848379992" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Show "Paid" UI</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1008.3021674444556 1403.2944877979992 L 45.55791833759375 1403.2944877979992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(43.35894866259375,1403.2944877979992) translate(-43.35894866259375,-1403.2944877979992)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 58.430750305882704 1396.5708289673278 L 45.00696390241626 1403.2944877979992 L 58.430750305882704 1410.0181466286706" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g></g><g/><g/><g/><g/><g/><g/></g></svg>